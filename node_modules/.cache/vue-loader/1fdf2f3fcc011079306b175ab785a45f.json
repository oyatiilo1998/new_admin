{"remainingRequest":"/home/oyatillo/projects_UDEVS/IMAN/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/oyatillo/projects_UDEVS/IMAN/src/custom/Scoring/Form/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/oyatillo/projects_UDEVS/IMAN/src/custom/Scoring/Form/index.vue","mtime":1606376691742},{"path":"/home/oyatillo/projects_UDEVS/IMAN/node_modules/cache-loader/dist/cjs.js","mtime":1591510878407},{"path":"/home/oyatillo/projects_UDEVS/IMAN/node_modules/babel-loader/lib/index.js","mtime":1591510878253},{"path":"/home/oyatillo/projects_UDEVS/IMAN/node_modules/cache-loader/dist/cjs.js","mtime":1591510878407},{"path":"/home/oyatillo/projects_UDEVS/IMAN/node_modules/vue-loader/lib/index.js","mtime":1591510899487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTmV3Rm9ybTogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBsYW5nOiAnJywKICAgICAgICBtYXhfaW52ZXN0bWVudF9hbW91bnQ6IG51bGwsCiAgICAgICAgbWluX2ludmVzdG1lbnRfYW1vdW50OiBudWxsLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBtYXhfcGVyY2VudDogbnVsbCwKICAgICAgICBtaW5fcGVyY2VudDogbnVsbAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgICd0aXRsZSc6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1JywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgICdtYXhfcGVyY2VudCc6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1JywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgICdtaW5fcGVyY2VudCc6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogICAgd2F0Y2g6IHsKICAgICdmb3JtLm1pbl9wZXJjZW50JyAoZSkgewogICAgICBpZiAocGFyc2VJbnQoZSkgPj0gcGFyc2VJbnQodGhpcy5mb3JtLm1heF9wZXJjZW50KSkgdGhpcy5mb3JtLm1pbl9wZXJjZW50ID0gdGhpcy5mb3JtLm1heF9wZXJjZW50IC0gMQogICAgfSwKICAgICAnZm9ybS5tYXhfcGVyY2VudCcgKGUpIHsKICAgICAgICBpZiAocGFyc2VJbnQoZSkgPT09IHBhcnNlSW50KHRoaXMuZm9ybS5taW5fcGVyY2VudCkpIHRoaXMuZm9ybS5taW5fcGVyY2VudCA9IHRoaXMuZm9ybS5tYXhfcGVyY2VudCAtIDEKICAgICB9LAogICAgICAnZm9ybS5taW5faW52ZXN0bWVudF9hbW91bnQnIChlKSB7CiAgICAgIGlmIChwYXJzZUludChlKSA+PSBwYXJzZUludCh0aGlzLmZvcm0ubWF4X2ludmVzdG1lbnRfYW1vdW50KSkgdGhpcy5mb3JtLm1pbl9pbnZlc3RtZW50X2Ftb3VudCA9IHRoaXMuZm9ybS5tYXhfaW52ZXN0bWVudF9hbW91bnQgLSAxCiAgICAgIGNvbnNvbGUubG9nKGUpCiAgICB9LAogICAgICdmb3JtLm1heF9pbnZlc3RtZW50X2Ftb3VudCcgKGUpIHsKICAgICAgICBpZiAocGFyc2VJbnQoZSkgPT09IHBhcnNlSW50KHRoaXMuZm9ybS5taW5faW52ZXN0bWVudF9hbW91bnQpKSB0aGlzLmZvcm0ubWluX2ludmVzdG1lbnRfYW1vdW50ID0gdGhpcy5mb3JtLm1heF9pbnZlc3RtZW50X2Ftb3VudCAtIDEKICAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja1Bvc3QgKCkgewogICAgICBsZXQgZmxhZyA9IG51bGwKICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGZsYWcgPSB0cnVlCiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmbGFnID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgICAgcmV0dXJuIGZsYWcKICAgIH0sCiAgICBwb3N0Q2F0ZWdvcnkgKCkgewogICAgICBpZiAodGhpcy5jaGVja1Bvc3QoKSA9PT0gZmFsc2UpIHJldHVybiAtMQogICAgICBjb25zb2xlLmxvZyh0aGlzLnN0cmluZ1RvSW50KCkpCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdwb3N0Q2F0ZWdvcnknLCB0aGlzLnN0cmluZ1RvSW50KCkpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICB0aGlzLiRhbGVydE1lc3NhZ2UoJ3N1Y2Nlc3MnLCAnVHV0b3InLCAnVHV0b3IgYWRkZWQgc3VjY2Vzc2Z1bGx5JywgdGhpcykKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgIH0pCiAgICB9LAogICAgZ2V0Q2F0ZWdvcnkgKGlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRDYXRlZ29yeScsIGlkKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgdGhpcy5mb3JtID0gcmVzLmNhdGVnb3J5CiAgICAgIH0pCiAgICB9LAogICAgc3RyaW5nVG9JbnQgKCkgewogICAgICByZXR1cm4geyAuLi50aGlzLmZvcm0sCiAgICAgICAgbWluX2ludmVzdG1lbnRfYW1vdW50OiBwYXJzZUludCh0aGlzLmZvcm0ubWluX2ludmVzdG1lbnRfYW1vdW50KSwKICAgICAgICBtYXhfaW52ZXN0bWVudF9hbW91bnQ6IHBhcnNlSW50KHRoaXMuZm9ybS5tYXhfaW52ZXN0bWVudF9hbW91bnQpLAogICAgICAgIG1heF9wZXJjZW50OiBwYXJzZUludCh0aGlzLmZvcm0ubWF4X3BlcmNlbnQpLAogICAgICAgIG1pbl9wZXJjZW50OiBwYXJzZUludCh0aGlzLmZvcm0ubWluX3BlcmNlbnQpCiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVDYXRlZ29yeSAoKSB7CiAgICAgIGlmICh0aGlzLmNoZWNrUG9zdCgpID09PSBmYWxzZSkgcmV0dXJuIC0xCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RyaW5nVG9JbnQoKSkKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUNhdGVnb3J5JywgdGhpcy5zdHJpbmdUb0ludCgpKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLiRhbGVydE1lc3NhZ2UoJ3N1Y2Nlc3MnLCAnQ2F0ZWdvcnknLCAnQ2F0ZWdvcnkgaGFzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JywgdGhpcykKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgIH0pCiAgICB9LAogICAgY2FuY2VsUG9zdCAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgaWYgKHRoaXMuJGlzRW1wdHlPYmoodGhpcy4kcm91dGUucGFyYW1zKSkgewogICAgICB0aGlzLmlzTmV3Rm9ybSA9IHRydWUKICAgIH0gZWxzZSB0aGlzLmdldENhdGVnb3J5KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/custom/Scoring/Form","sourcesContent":["<template>\n  <a-card>\n    <a-row type=\"flex\">\n      <a-col :span=\"12\" :offset=\"2\">\n        <a-divider orientation=\"left\">Форма</a-divider>\n        <a-form-model :colon=\"false\" ref=\"ruleForm\" :model=\"form\" :rules=\"rules\">\n          <a-row class=\"form-row\" :gutter=\"16\">\n            <a-col>\n              <a-form-model-item label=\"Название\" prop=\"title\">\n                <a-input v-model=\"form.title\" placeholder=\"название категории\" />\n              </a-form-model-item>\n            </a-col>\n            <a-col span=\"8\">\n              <a-form-model-item label=\"Минимум инвест.\" prop=\"min_investment_amount\">\n                <a-input min=\"0\" type=\"number\" placeholder=\"Minimum investment\" v-model=\"form.min_investment_amount\" />\n              </a-form-model-item>\n            </a-col>\n            <a-col span=\"8\">\n              <a-form-model-item label=\"Максимум вложений.\" prop=\"max_investment_amount\">\n                <a-input min=\"0\" type=\"number\" placeholder=\"Minimum investment\" v-model=\"form.max_investment_amount\" />\n              </a-form-model-item>\n            </a-col>\n            <a-col span=\"8\">\n              <a-form-model-item :label=\"$t('Язык')\" style=\"padding: 50px'\" prop=\"lang\">\n                <a-select\n                  v-model=\"form.lang\"\n                >\n                  <a-select-option v-for=\"item in $store.state.langs\" :key=\"item.key\" :value=\"item.key\" >\n                    {{ item.title }}\n                  </a-select-option>\n                </a-select>\n              </a-form-model-item>\n            </a-col>\n            <a-col span=\"16\">\n              <a-form-model-item label=\"Проценты\" prop=\"min_percent\">\n                <a-input-group compact>\n                  <a-input min=\"0\" type=\"number\" v-model=\"form.min_percent\" style=\" width: 100px; text-align: center\" placeholder=\"Minimum\" />\n                  <a-input\n                    style=\" width: 30px; border-left: 0; pointer-events: none; backgroundColor: #fff\"\n                    placeholder=\"~\"\n                    disabled\n                  />\n                  <a-input type=\"number\" v-model=\"form.max_percent\" style=\"width: 100px; text-align: center; border-left: 0\" placeholder=\"Maximum\" />\n                </a-input-group>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col span=\"24\">\n              <a-form-model-item label=\" \">\n                <a-row type=\"flex\" justify=\"end\">\n                  <a-col span=\"auto\">\n                    <a-button @click=\"cancelPost\" type=\"grey\" style=\"margin-right: 6px\">{{\n                      $t('button.cancel')\n                    }}</a-button>\n                    <a-button @click=\"postCategory\" v-if=\"isNewForm\" type=\"primary\">{{ $t('button.create') }}</a-button>\n                    <a-button @click=\"updateCategory\" v-else type=\"primary\">{{ $t('button.save') }}</a-button>\n                  </a-col>\n                </a-row>\n              </a-form-model-item>\n            </a-col>\n          </a-row>\n        </a-form-model>\n      </a-col>\n    </a-row>\n  </a-card>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      isNewForm: false,\n      form: {\n        lang: '',\n        max_investment_amount: null,\n        min_investment_amount: null,\n        title: '',\n        max_percent: null,\n        min_percent: null\n      },\n      rules: {\n        'title': [{ required: true, message: 'Пожалуйста, введите', trigger: 'blur' }],\n        'max_percent': [{ required: true, message: 'Пожалуйста, введите', trigger: 'blur' }],\n        'min_percent': [{\n            required: true,\n            message: 'Пожалуйста, введите',\n            trigger: 'blur'\n          }\n          ]\n      }\n    }\n  },\n    watch: {\n    'form.min_percent' (e) {\n      if (parseInt(e) >= parseInt(this.form.max_percent)) this.form.min_percent = this.form.max_percent - 1\n    },\n     'form.max_percent' (e) {\n        if (parseInt(e) === parseInt(this.form.min_percent)) this.form.min_percent = this.form.max_percent - 1\n     },\n      'form.min_investment_amount' (e) {\n      if (parseInt(e) >= parseInt(this.form.max_investment_amount)) this.form.min_investment_amount = this.form.max_investment_amount - 1\n      console.log(e)\n    },\n     'form.max_investment_amount' (e) {\n        if (parseInt(e) === parseInt(this.form.min_investment_amount)) this.form.min_investment_amount = this.form.max_investment_amount - 1\n     }\n  },\n  methods: {\n    checkPost () {\n      let flag = null\n      this.$refs.ruleForm.validate((valid) => {\n        if (valid) {\n          flag = true\n          return true\n        } else {\n          flag = false\n          return false\n        }\n      })\n      return flag\n    },\n    postCategory () {\n      if (this.checkPost() === false) return -1\n      console.log(this.stringToInt())\n      this.$store.dispatch('postCategory', this.stringToInt()).then((res) => {\n        console.log(res)\n        this.$alertMessage('success', 'Tutor', 'Tutor added successfully', this)\n        this.$router.go(-1)\n      })\n    },\n    getCategory (id) {\n      this.$store.dispatch('getCategory', id).then((res) => {\n        console.log(res)\n        this.form = res.category\n      })\n    },\n    stringToInt () {\n      return { ...this.form,\n        min_investment_amount: parseInt(this.form.min_investment_amount),\n        max_investment_amount: parseInt(this.form.max_investment_amount),\n        max_percent: parseInt(this.form.max_percent),\n        min_percent: parseInt(this.form.min_percent)\n      }\n    },\n    updateCategory () {\n      if (this.checkPost() === false) return -1\n      console.log(this.stringToInt())\n      this.$store.dispatch('updateCategory', this.stringToInt()).then((res) => {\n        this.$alertMessage('success', 'Category', 'Category has updated successfully', this)\n        this.$router.go(-1)\n      })\n    },\n    cancelPost () {\n      this.$router.go(-1)\n    }\n  },\n  created () {\n    if (this.$isEmptyObj(this.$route.params)) {\n      this.isNewForm = true\n    } else this.getCategory(this.$route.params.id)\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}