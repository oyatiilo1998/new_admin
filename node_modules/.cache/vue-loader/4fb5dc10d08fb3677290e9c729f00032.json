{"remainingRequest":"/home/oyatillo/projects_UDEVS/new_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/oyatillo/projects_UDEVS/new_admin/src/custom/Category/Form/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/oyatillo/projects_UDEVS/new_admin/src/custom/Category/Form/index.vue","mtime":1607234347443},{"path":"/home/oyatillo/projects_UDEVS/new_admin/node_modules/cache-loader/dist/cjs.js","mtime":1591510878407},{"path":"/home/oyatillo/projects_UDEVS/new_admin/node_modules/babel-loader/lib/index.js","mtime":1591510878253},{"path":"/home/oyatillo/projects_UDEVS/new_admin/node_modules/cache-loader/dist/cjs.js","mtime":1591510878407},{"path":"/home/oyatillo/projects_UDEVS/new_admin/node_modules/vue-loader/lib/index.js","mtime":1591510899487}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRlZ29yeUlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgIGxhYmVsQ29sOiB7IHNwYW46IDI0IH0sCiAgICAgIHdyYXBwZXJDb2w6IHsgc3BhbjogMjQgfSwKICAgICAgb3RoZXI6ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgY2F0ZWdvcnk6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwYXJlbnRfaWQ6IG51bGwKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCdyZXF1aXJlZCcpLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIGlmICh0aGlzLmNhdGVnb3J5SWQpIHRoaXMuZ2V0Q2F0ZWdvcnlBdHRycyh0aGlzLmNhdGVnb3J5SWQpCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnZ2V0Q2F0ZWdvcnknLCAnZ2V0Q2F0ZWdvcmllcycsICdwb3N0Q2F0ZWdvcnknLCAndXBkYXRlQ2F0ZWdvcnknXSksCiAgICBnZXRDYXRlZ29yeUF0dHJzIChjYXRlZ29yeSkgewogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmw6ICcvY2F0ZWdvcnkvJyArIGNhdGVnb3J5LAogICAgICAgIG1ldGhvZDogJ2dldCcKICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgIH0sCiAgICBvblN1Ym1pdCAoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgdXJsID0gJy9jYXRlZ29yeScKICAgICAgICAgIHZhciBtZXRob2QgPSAncG9zdCcKICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5jYXRlZ29yeQogICAgICAgICAgY29uc3QgaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuY2F0ZWdvcnlJZCkgewogICAgICAgICAgICBtZXRob2QgPSAncHV0JwogICAgICAgICAgICB1cmwgPSAnL2NhdGVnb3J5LycgKyB0aGlzLmNhdGVnb3J5SWQKICAgICAgICAgIH0KICAgICAgICAgIHJlcXVlc3QoewogICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycwogICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmdldENhdGVnb3JpZXMoKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL2NhdGVnb3J5L2xpc3QnKQogICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5yZXNwb25zZS5kYXRhLmVycm9yKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgY29uc29sZS5sb2coJ3ZhbGlkJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJykKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICByZXNldEZvcm0gKCkgewogICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnJlc2V0RmllbGRzKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/custom/Scoring/Form","sourcesContent":["<template>\n  <div>\n    <a-row>\n      <a-col :md=\"12\" :xs=\"24\">\n        <a-breadcrumb style=\"margin: 10px 5px\">\n          <a-breadcrumb-item>\n            <router-link to=\"/token/\">{{ $t('token') }}</router-link>\n          </a-breadcrumb-item>\n          <a-breadcrumb-item>{{ $t('add') }}</a-breadcrumb-item>\n        </a-breadcrumb>\n      </a-col>\n    </a-row>\n\n    <a-card :title=\"$t('fillIn')\">\n      <template>\n        <a-form-model\n          @submit=\"onSubmit\"\n          ref=\"ruleForm\"\n          :model=\"category\"\n          :rules=\"rules\"\n          :label-col=\"labelCol\"\n          :wrapper-col=\"wrapperCol\"\n        >\n          <a-row>\n            <a-col :md=\"12\" :xs=\"24\" style=\"padding: 0 15px\">\n              <a-form-model-item :label=\"$t('Kategoriya')\" prop=\"kategoriya\">\n                <a-input\n                  :placeholder=\"$t('Kategoriya')\"\n                  v-model=\"category.name\"\n                />\n              </a-form-model-item>\n            </a-col>\n            <a-col :span=\"24\" style=\"padding: 0 15px\">\n              <a-form-model-item>\n                <a-button type=\"primary\" html-type=\"submit\" @click=\"onSubmit\">\n                  {{ $t('save') }}\n                </a-button>\n                <a-button style=\"margin-left: 10px;\" @click=\"resetForm\">\n                  {{ $t('reset') }}\n                </a-button>\n              </a-form-model-item>\n            </a-col>\n          </a-row>\n        </a-form-model>\n      </template>\n    </a-card>\n  </div>\n</template>\n<script>\nimport request from '@/utils/request'\nimport { mapActions } from 'vuex'\n\nexport default {\n  data () {\n    return {\n      categoryId: this.$route.params.id,\n      labelCol: { span: 24 },\n      wrapperCol: { span: 24 },\n      other: '',\n      loading: false,\n      category: {\n        name: '',\n        parent_id: null\n      },\n      rules: {\n        name: [\n          { required: true, message: this.$t('required'), trigger: 'change' }\n        ]\n      }\n    }\n  },\n  mounted () {\n    if (this.categoryId) this.getCategoryAttrs(this.categoryId)\n  },\n  methods: {\n    ...mapActions(['getCategory', 'getCategories', 'postCategory', 'updateCategory']),\n    getCategoryAttrs (category) {\n      request({\n        url: '/category/' + category,\n        method: 'get'\n      }).then(response => {\n        this.category = response.data\n      })\n    },\n    onSubmit (e) {\n      e.preventDefault()\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          var url = '/category'\n          var method = 'post'\n          var data = this.category\n          const headers = {\n            'Content-Type': 'application/json'\n          }\n          if (this.categoryId) {\n            method = 'put'\n            url = '/category/' + this.categoryId\n          }\n          request({\n              url: url,\n              method: method,\n              data: data,\n              headers: headers\n          }).then(res => {\n            this.getCategories()\n            this.$router.replace('/category/list')\n          }).catch(err => {\n            if (err) {\n              console.log(err)\n              this.$message.error(err.response.data.error)\n            }\n          })\n          console.log('valid')\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    resetForm () {\n      this.$refs.ruleForm.resetFields()\n    }\n  }\n}\n</script>\n<style>\n  .ant-form-item-control {\n    line-height: normal !important;\n  }\n  @media (max-width: 760px) {\n    .ant-form-item {\n      margin: 0;\n    }\n  .ant-form-item-label {\n    padding-bottom: 4px !important;\n  }\n  }\n</style>\n"]}]}